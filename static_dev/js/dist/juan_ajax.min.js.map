{"version":3,"sources":["juan_ajax.js"],"names":["csrftoken","$","cookie","csrfSafeMethod","method","test","Quitar","cada_producto_id","valor","ajax","beforeSend","xhr","settings","type","this","crossDomain","setRequestHeader","url","data","success","json","idproducto","val","cantida","cant","console","log","localStorage","removeItem","toString","JSON","stringify","producto","dataType","urla","window","location","origin","href","reload","contentType","error","Agregar","clave","setItem","AgregarValor","key","el_valor","AgregarI","length","i","valcp","attr","ImprimirProductos","print","agruparfunc","mi_lista","valParam","CambiarClave","html","click","event","parent","get","id","find","errmsg","err","clave_eliminar","startsWith","preventDefault","focusout","replace"],"mappings":"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","file":"juan_ajax.min.js","sourcesContent":["/*jslint browser: true*/\n/*jslint plusplus: true*/\n/*global FormData: false */\n/*global $, jQuery, alert, console*/\n/*..............................................................................................\n... PARA VALIDAR LOS DATOS .....................................................\n.............................................................................................*/\nvar csrftoken = $.cookie('csrftoken');\nfunction csrfSafeMethod(method) {\n    \"use strict\";\n    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\n\n/*-------------------------------------------------------------------------\n--------- PRESTIGE-------------------- ------------------------------------\nconsole.log(\"hola\");\n$( \"*\" ).css({\n      \"background-color\": \"red\",\n      \"font-weight\": \"bolder\"\n    });\n-------------------------------------------------------------------------*/\n \n\n/*-------------------------------------------------------------------------\n--------- QUITAR A PEDIDO TRANSITORIO ------------------------------------\n-------------------------------------------------------------------------*/\n \nfunction Quitar(cada_producto_id, valor) {\n    \"use strict\";\n    $.ajax({\n        beforeSend : function (xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t},\n\t\turl : \"/tienda/quitar/\",\n\t\ttype : \"GET\",\n\t\tdata : { cada_producto_id:cada_producto_id, valor:valor},\n\t\tsuccess : function (json) {\n            $('#'+json[0].idproducto +' .vervalor').val(json[0].cantida);\n            let cant = json[0].cantida\n            console.log(typeof(cant))\n            if (cant == 0){\n                console.log(\"vacío\");\n                localStorage.removeItem(json[0].idproducto.toString(), json[0].cantida.toString());\n\n                console.log(JSON.stringify(localStorage));\n                console.log(\"JSON.stringify(localStorage)\");\n                $.ajax({\n                    url: \"/tienda/crear_localstorage/\",\n                    data:{producto : JSON.stringify(localStorage)},\n                    type: 'get',\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        var urla = window.location.origin + \"/panel/carrito\";    \n                        //var urla = \"http://127.0.0.1:8000/\"+ \"panel/carrito\";\n                        window.location.href = urla;\n                    },\n                    //data: JSON.stringify(person)\n                });\n                location.reload();\n            }else{\n                console.log(\"no vacío\");\n                localStorage.setItem(json[0].idproducto.toString(), json[0].cantida.toString());\n                location.reload();\n            }\n            location.reload();\n            console.log(\"ok -----------\")\n\t\t},\n\t\terror : function (xhr, errmsg, err) {\n\t\t\tconsole.log('Error en carga de respuesta');\n\t\t}\n    });\n}\n$('.quitar').click(function (event) {\n    \"use strict\";\n    let cada_producto_id = $(this).parent().get(0).id;\n    let valor = $(this).parent().find('.vervalor').val();\n    console.log(cada_producto_id);\n    console.log(valor);\n\n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    let i;\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n        /*\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave = localStorage.key(i);\n        let el_valor = localStorage[clave];\n        if(clave == cada_producto_id){\n            console.log(\"-----111------\")\n            console.log(clave);\n            console.log(valor);\n            valor = el_valor;\n            console.log(\"-----111------\")\n        }else{\n            console.log(\"no hay coincidencia\");\n        }   \n    }\n    Quitar(cada_producto_id, valor);\n});\n\n/*-------------------------------------------------------------------------\n--------- AGREGAR A PEDIDO TRANSITORIO ------------------------------------\n-------------------------------------------------------------------------*/\n\nfunction Agregar(cada_producto_id, valor) {\n    \"use strict\";\n    $.ajax({\n        beforeSend : function (xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t},\n\t\turl : \"/tienda/agregar/\",\n\t\ttype : \"GET\",\n\t\tdata : { cada_producto_id:cada_producto_id, valor:valor},\n\t\tsuccess : function (json) {\n            console.log(json[0].idproducto.toString())\n            console.log(json[0].cantida.toString())\n            localStorage.setItem(json[0].idproducto.toString(), json[0].cantida.toString());\n            location.reload();\n            console.log(\"ok++++++++++++++++++++++++\")\n\t\t},\n\t\terror : function (xhr, errmsg, err) {\n\t\t\tconsole.log('Error en carga de respuesta');\n\t\t}\n    });\n}\n$('.agregar').click(function (event) {\n    \"use strict\";\n    event.preventDefault();\n    \n    let cada_producto_id = $(this).parent().get(0).id;\n    let valor = $(this).parent().find('.vervalor').val();\n    console.log(cada_producto_id);\n    console.log(valor);\n\n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    let i;\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        console.log(typeof clave_eliminar);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n        /*\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave = localStorage.key(i);\n        let el_valor = localStorage[clave];\n        if(clave == cada_producto_id){\n            console.log(\"-----1112------\")\n            console.log(clave);\n            console.log(valor);\n            valor = el_valor;\n            console.log(\"-----1112------\")\n        }else{\n            console.log(\"no hay coincidenciaaaa\");\n        }   \n    }\n\n   Agregar(cada_producto_id, valor);\n});\n\n/*-------------------------------------------------------------------------\n--------- AGREGAR VALOR INTRODUCIDO EN EL CAMPO .VERVALOR ----------------- \n-------------------------------------------------------------------------*/\nfunction AgregarValor(cada_producto_id, valor) {\n    \"use strict\";\n    $.ajax({\n        beforeSend : function (xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t},\n\t\turl : \"/tienda/agregar_valor/\",\n\t\ttype : \"GET\",\n\t\tdata : { cada_producto_id:cada_producto_id, valor:valor},\n\t\tsuccess : function (json) {\n            console.log(json[0].idproducto.toString())\n            console.log(json[0].cantida.toString())\n            localStorage.setItem(json[0].idproducto.toString(), json[0].cantida.toString());\n            location.reload();\n            console.log(\"ok++++++++++++++++++++++++\")\n\t\t},\n\t\terror : function (xhr, errmsg, err) {\n\t\t\tconsole.log('Error en carga de respuesta');\n\t\t}\n    });\n}\n\n$('.vervalor').focusout(function (event) {\n    \"use strict\";\n    event.preventDefault();\n    \n    let cada_producto_id = $(this).parent().get(0).id;\n    let valor = $(this).parent().find('.vervalor').val();\n    console.log(cada_producto_id);\n    console.log(valor);\n \n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    let i;\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n        /*\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave = localStorage.key(i);\n        //let el_valor = localStorage[clave];\n        if(clave == cada_producto_id){\n            console.log(\"-----111------\")\n            console.log(clave);\n            console.log(valor);\n            valor = valor;\n            console.log(\"-----111------\")\n        }else{\n            console.log(\"no hay coincidencia\");\n        }   \n    }\n    console.log(cada_producto_id);\n    console.log(valor);\n   AgregarValor(cada_producto_id, valor);\n});\n/*-------------------------------------------------------------------------\n--------- AGREGAR PRIMER PRODUCTO A PEDIDO TRANSITORIO -------------------- \n-------------------------------------------------------------------------*/\nfunction AgregarI(cada_producto_id, valor) {\n    \"use strict\";\n    console.log(\"------aaaa-----\")\n    console.log(cada_producto_id);\n    console.log(valor);\n    console.log(\"------bbbb-----\")\n    \n    $.ajax({\n        beforeSend : function (xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t},\n\t\turl : \"/tienda/agregar_i/\",\n\t\ttype : \"GET\",\n\t\tdata : { cada_producto_id:cada_producto_id, valor:valor},\n\t\tsuccess : function (json) {\n            $('#'+json[0].idproducto +' .vervalor').val(json[0].cantida);\n            console.log(json[0].idproducto.toString())\n            console.log(json[0].cantida.toString())\n            localStorage.setItem(json[0].idproducto.toString(), json[0].cantida.toString());\n\n            for(i = 0; i < localStorage.length; i++){\n                let clave = localStorage.key(i);\n                let valcp;\n                valcp = \".cp_\" + clave.toString()\n                $( valcp ).attr(\"disabled\", true);\n              }\n\n            console.log(\"ok++++++++++++++++++++++++\")\n\t\t},\n\t\terror : function (xhr, errmsg, err) {\n\t\t\tconsole.log('Error en carga de respuesta');\n\t\t}\n    });\n   \n}\n\n$('.agregar_i').click(function (event) {\n    \"use strict\";\n    event.preventDefault();\n   \n    let cada_producto_id = $(this).parent().find('.verid').val();\n    let valor = $(this).parent().find('.vervalor').val();\n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    let i;\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        console.log(\"bbbbbbbb\");\n        console.log(typeof clave_eliminar);\n        console.log(clave_eliminar);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n    for(i = 0; i < localStorage.length; i++){\n        let clave = localStorage.key(i);\n        let el_valor = localStorage[clave];\n        if(clave == cada_producto_id){\n            console.log(\"-----111------\")\n            console.log(clave);\n            console.log(valor);\n            valor = el_valor;\n            console.log(\"-----111------\")\n        }else{\n            console.log(\"no hay coincidencia\");\n        }   \n    }\n    console.log(\"----------s------------------\")\n    console.log(cada_producto_id)\n    console.log(valor)\n    console.log(\"----------s------------------\")\n   AgregarI(cada_producto_id, valor);\n});\n\nfunction ImprimirProductos(valor) {\n    \"use strict\";\n    print(valor);\n}\n\n/* \nfunction Crear(valor) {\n    \"use strict\";\n    console.log(\"valor\");\n    console.log(valor);\n    console.log(typeof(valor));\n    console.log(\"valor\");\n    var person = {\n        \"id\": \"ddddddddddd\",\n        \"cantidad\": \"ddddddssss\",\n    }\n    $.ajax({\n        url: \"/crear_localstorage/\",\n        data:{producto : JSON.stringify(valor)},\n        type: 'get',\n        dataType: 'json',\n        contentType: 'application/json',\n        success: function (data) {\n            //$('#target').html(data.msg);\n        },\n        //data: JSON.stringify(person)\n    }); \n}\n*/\n/*-------------------------------------------------------------------------\n--------- IR AL CARRITO --------------------------------------------------- \n-------------------------------------------------------------------------*/\n$('.boton_carrito').click(function() {\n    /*\n    $(\"*\").css({\n    \"background-color\": \"blue\",\n    \"font-weight\": \"bolder\"\n    \n    });\n    */\n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    console.log(\"JSON.stringify(localStorage)\");\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n        /*\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n\n    $.ajax({\n        url: \"/tienda/crear_localstorage/\",\n        data:{producto : JSON.stringify(localStorage)},\n        type: 'get',\n        dataType: 'json',\n        contentType: 'application/json',\n        success: function (data) {\n            var urla = window.location.origin + \"/carro/carrito\";    \n            //var urla = \"http://127.0.0.1:8000/\"+ \"panel/carrito\";\n\n            window.location.href = urla;\n        },\n        //data: JSON.stringify(person)\n    });\n\n  });\n\n/*-------------------------------------------------------------------------\n--------- FINALIZAR COMPRA  ----------------------------------------------- \n------------------------------------------------------------------------- \n  $('.finalizar_compra').click(function() {\n    \n    $(\"*\").css({\n    \"background-color\": \"blue\",\n    \"font-weight\": \"bolder\"\n    \n    });\n    \n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n    console.log(\"JSON.stringify(localStorage)\");\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n \n    }\n\n    $.ajax({\n        url: \"/tienda/comprar/\",\n        data:{producto : JSON.stringify(localStorage)},\n        type: 'get',\n        dataType: 'json',\n        contentType: 'application/json',\n        success: function (data) {\n            var urla = window.location.origin + \"/panel/carrito\";    \n            //var urla = \"http://127.0.0.1:8000/\"+ \"panel/carrito\";\n            window.location.href = urla;\n        },\n        //data: JSON.stringify(person)\n    });\n\n  });\n*/\n/*-------------------------------------------------------------------------\n--------- AGRUPAR PRODUCTOS ----------------------------------------------- \n-------------------------------------------------------------------------*/\n  function agruparfunc(mi_lista){\n      \"use strict\";\n      let valParam = JSON.stringify(mi_lista);\n      $.ajax({\n          beforeSend : function (xhr, settings) {\n              if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n                  xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n              }\n          },\n          url : \"/tienda/agrupar_productos_admin/\",\n          type : \"GET\",\n          data: { mi_lista: valParam} ,\n          contentType: 'application/json; charset=utf-8',\n          success : function (json) {\n            var urla = window.location.origin + \"/admin/productos/producto\";\n            window.location.href = urla;\n              console.log(\"ok++++++++++++++++++++++++\")\n          },\n          error : function (xhr, errmsg, err) {\n              console.log('Error en carga de respuesta');\n          }\n      });\n  }\n\n/* *************************************************************\n* Borrar producto del carrito\n************************************************************** */\n\n\n$('.eliminar_producto').click(function (event) {\n    \"use strict\";\n    let cada_producto_id = $(this).attr('id');\n    console.log(\"!!!2222!!!!\");\n    console.log(cada_producto_id);\n    cada_producto_id = cada_producto_id.replace(/^el/, \"prestige_\"); \n    console.log(cada_producto_id);\n    console.log(\"JSON.stringify(localStorage)\");\n    console.log(JSON.stringify(localStorage));\n\n    let i;\n\n    for(i = 0; i < localStorage.length; i++){\n        let clave_eliminar = localStorage.key(i);\n        if(!clave_eliminar.startsWith(\"prestige_\")){\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n            localStorage.removeItem(clave_eliminar);\n            console.log(\"retorna NO verdadero !!!!!!!!!!!!!\");\n        }\n\n        /*\n        if(isNaN(clave_eliminar)){\n            localStorage.removeItem(i);\n        }\n\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n        /*\n        if(clave_eliminar == \"django.admin.navSidebarIsOpen\"){\n            localStorage.removeItem(\"django.admin.navSidebarIsOpen\");\n        } */\n    }\n\n\n \n    localStorage.removeItem(cada_producto_id);\n                console.log(JSON.stringify(localStorage));\n                console.log(\"JSON.stringify(localStorage)\");\n                $.ajax({\n                    url: \"/tienda/crear_localstorage/\",\n                    data:{producto : JSON.stringify(localStorage)},\n                    type: 'get',\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        \n                    var urla = window.location.origin + \"/panel/carrito\";    \n                    //var urla = \"http://127.0.0.1:8000/\"+ \"panel/carrito\";\n                        window.location.href = urla;\n                    },\n                    //data: JSON.stringify(person)\n                });\n \n});\n\n\n/* *****************************************************************\n* ACTUALIZAR CLAVE MAYORISTA\n******************************************************************/\nfunction CambiarClave(clave) {\n    \"use strict\";\n    $.ajax({\n        beforeSend : function (xhr, settings) {\n\t\t\tif (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n\t\t\t\txhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n\t\t\t}\n\t\t},\n\t\turl : \"/panel/actualizar_clave/\",\n\t\ttype : \"GET\",\n\t\tdata : {clave:clave},\n\t\tsuccess : function (json) {\n            $('#resulado_actualizar_clave').html(\"<p>La clave fue actualizada correctamente a: <span style='font-size:20px; color:yellow;'>\" + json[0].clave + \"</span></p>\");\n            location.reload();\n            console.log(\"ok -----------\")\n\t\t},\n\t\terror : function (xhr, errmsg, err) {\n\t\t\tconsole.log('Error en carga de respuesta');\n\t\t}\n    });\n}\n$('#actualizar_c').focusout(function (event) {\n    \"use strict\";\n    let clave = $(this).val();\n    console.log(clave);\n\n    CambiarClave(clave);\n});\n\n/* *****************************************************************\n* Checkout\n******************************************************************/"]}